<div style="text-align:center;" align="center">

<img src="https://images.gitee.com/uploads/images/2020/0821/230221_561fc363_863133.png" alt="VirAPI LOGO" style="width:260px;">

<h3>VirAPIâ€”â€”åœ¨çº¿è™šæ‹Ÿæ•°æ®äº‘æ¥å£å¹³å°</h3>

å†…ç½®MockJsè¯­æ³•æ”¯æŒï¼Œè¯·æ±‚æ¥å£å³å¯è·å¾—è‡ªå®šä¹‰è§„åˆ™çš„è™šæ‹Ÿæ•°æ®ã€‚å¸®åŠ©å¼€å‘è€…ï¼Œç‰¹åˆ«æ˜¯å‰ç«¯å¼€å‘è€…ï¼Œæä¾›å¾ˆå¥½çš„å¿«é€Ÿå¼€å‘ä½“éªŒã€‚

[VirAPIå®˜ç½‘  Â»](http://www.virapi.com/?_from=github)

<br/>

[æ–‡ç« ](http://www.virapi.com/article.html?_from=github)
Â·
[å…³äº](http://www.virapi.com/about.html?_from=github)
Â·
[æ§åˆ¶å°](http://console.virapi.com/?_from=github)

[![node-current](https://img.shields.io/badge/NodeJs-%3E%3D8.9.0-brightgreen)](https://nodejs.org/en/)
[![egg-current](https://img.shields.io/badge/EggJs-%5E2.15.1-brightgreen)](https://eggjs.org/zh-cn/intro/quickstart.html)
[![mongo-current](https://img.shields.io/badge/MongoDB-%3E%3D3.4.1-brightgreen)](https://www.mongodb.com/try)
[![mockjs-current](https://img.shields.io/badge/MockJs-%5E1.1.0-brightgreen)](http://mockjs.com/)
[![license-current](https://img.shields.io/badge/License-Apache--2.0-blue)](http://www.apache.org/licenses/LICENSE-2.0.html)

</div>
<br/>

## VirAPIç®€ä»‹

VirAPIï¼ˆVirtual APIï¼‰â€”â€” åœ¨çº¿è™šæ‹Ÿæ•°æ®äº‘æ¥å£å¹³å°ï¼›éä¾µå…¥å¼è™šæ‹Ÿæ•°æ®åœ¨çº¿è¯·æ±‚å“åº”ç”Ÿæˆæ¥å£ï¼Œæ”¯æŒMockJsè¯­æ³•ï¼Œè¯·æ±‚å³å¯å¾—è‡ªå®šä¹‰è§„åˆ™çš„å“åº”æ•°æ®ï¼›å¸®åŠ©ä½ æœ¬åœ°æµ‹è¯•æˆ–æ¼”ç¤ºé¡¹ç›®ä¹‹ç”¨ã€‚

é€šè¿‡VirAPIä½ å¯ä»¥é€šè¿‡è¿œç¨‹æ¥å£URLè®¿é—®ç›´æ¥è·å¾—è‡ªå®šä¹‰çš„éšæœºè™šæ‹Ÿå“åº”æ•°æ®ï¼Œè‹¥æ˜¯åªæƒ³åšå‰ç«¯å®¢æˆ·ç«¯ï¼ˆAppã€å°ç¨‹åºã€ç½‘é¡µç­‰ï¼‰çš„åŠŸèƒ½æ¼”ç¤ºæˆ–ä¸šåŠ¡æ¨¡æ‹Ÿæµ‹è¯•ï¼Œè€Œåˆä¸æƒ³è€—è´¹æ—¶é—´ç²¾åŠ›å»ç­‰å¾…åç«¯æ¥å£çš„å¼€å‘å®Œæˆï¼Œç”šè‡³ä¸æƒ³æ­å»ºåç«¯æœåŠ¡é€»è¾‘ï¼Œé‚£ä¹ˆVirAPIä¼šæ˜¯ä½ çš„å¥½å¸®æ‰‹ã€‚

**VirAPIçš„åŠŸèƒ½ç‰¹è‰²ï¼š**
+ å†…åµŒMockè¯­æ³•æ”¯æŒï¼Œå¯å¿«é€Ÿå®šä¹‰è™šæ‹Ÿæ•°æ®ç»“æ„
+ å¯è§†åŒ–æ“ä½œï¼Œå¯è§†å³å¯å¾—ï¼Œä½é—¨æ§›å¿«é€Ÿä¸Šæ‰‹
+ æ”¯æŒå¤šç§è¯·æ±‚ç±»å‹ï¼ˆGETã€POSTã€PUTã€DELETEï¼‰
+ æ¥å£è¯·æ±‚æƒé™éªŒè¯ï¼Œé˜»æ­¢éæ³•è¯·æ±‚è™šæ‹Ÿæ¥å£
+ æ¥å£é¡¹ç›®åº”ç”¨åŒ–ç®¡ç†ï¼Œè¿˜åŸå®é™…å¼€å‘åœºæ™¯
+ è™šæ‹Ÿæ¥å£è¯·æ±‚æ—¥å¿—æ•°æ®æŸ¥çœ‹åŠç»Ÿè®¡
+ æä¾›åº”ç”¨æ¥å£æ–‡æ¡£ç®¡ç†ï¼Œé«˜æ•ˆç®¡ç†æ¥å£åŠé¡¹ç›®è®¡åˆ’
+ é›¶æ±¡æŸ“æ— ä¾µå…¥ï¼Œè€Œæ— éœ€åœ¨é¡¹ç›®ä»£ç ä¸­å¼•å…¥MockåŒ…
+ å…è´¹å¼€æºï¼Œå¯ç‹¬ç«‹éƒ¨ç½²æ­å»º
+ ......

<br/>

## VirAPIå¼€æºç‰ˆ

å¯¹åº”å‰ç«¯UIä»£ç ä»“åº“ï¼š[https://github.com/bluvenr/open_virapi_front_end](https://github.com/bluvenr/open_virapi_front_end)

### ç¯å¢ƒä¾èµ–
+ NodeJs(NPM)
+ MongoDB

æœ¬é¡¹ç›®ä½¿ç”¨äº†[eggjs](https://eggjs.org/zh-cn/intro/quickstart.html)ä½œä¸ºåç«¯é€»è¾‘é¡¹ç›®æ¡†æ¶ã€‚

### è¿è¡Œ&éƒ¨ç½²
æ­å»ºå¥½å¿…è¦ç¯å¢ƒåï¼Œæ‰§è¡Œ`npm install`å®‰è£…é¡¹ç›®æ‰€éœ€ä¾èµ–åŒ…ã€‚

æœ¬åœ°æµ‹è¯•è¿è¡Œï¼Œåˆ™è¯·æ‰§è¡Œï¼š`npm dev`

æ­£å¼ç¯å¢ƒè¿è¡Œï¼Œè¯·æ‰§è¡Œï¼š`npm start`ï¼›æ­¤æ—¶è‹¥æƒ³å…³é—­åœæ­¢é¡¹ç›®ï¼Œåˆ™æ‰§è¡Œï¼š`npm stop`ã€‚ç”±äºeggjsæ¡†æ¶çš„æœºåˆ¶ï¼Œè¯·æ¯æ¬¡ä¿®æ”¹åç«¯ä»£ç åé‡å¯è¯¥é¡¹ç›®`npm restart`ã€‚

é»˜è®¤æœåŠ¡ç«¯å£ä¸º`7001`ï¼Œæœ¬åœ°å¯ç›´æ¥è®¿é—®`http://127.0.0.1:7001/`è¿›å…¥æ§åˆ¶å°ç®¡ç†é¡µé¢ã€‚è‹¥æ˜¯éƒ¨ç½²åˆ°çº¿ä¸Šï¼Œå¯é…ç½®nginxæˆ–apacheè¿›è¡Œé‡å®šå‘ã€‚


### é¡¹ç›®é…ç½®ç›¸å…³ä»‹ç»
é¡¹ç›®é…ç½®æ–‡ä»¶æ”¾åœ¨`config/config.default.js`æ–‡ä»¶ä¸­ï¼Œè‹¥æ˜¯æ”¾ç½®æœåŠ¡å™¨æ­£å¼ç¯å¢ƒï¼Œåˆ™å»ºè®®å¤åˆ¶è¯¥æ–‡ä»¶ä½ éœ€è¦è‡ªå®šä¹‰çš„é…ç½®åœ¨åŒç›®å½•ä¸‹å‘½åä¸º`config.local.js`æ–‡ä»¶ä¸­ï¼Œå¹¶è®¾ç½®ä½ è¦çš„é…ç½®å‚æ•°ã€‚

é»˜è®¤`config.default.js`æ–‡ä»¶å†…å®¹ä¸ºï¼š

``` javascript
/* eslint valid-jsdoc: "off" */

'use strict';

const fs = require('fs');
const path = require('path');

/**
 * @param {Egg.EggAppInfo} appInfo app info
 */
module.exports = appInfo => {
  /**
   * built-in config
   * @type {Egg.EggAppConfig}
   **/
  const config = {
    mongoose: {
      // url: 'mongodb://127.0.0.1:27017/open_virapi_db',
      options: {
        // useMongoClient: true,
        autoReconnect: true,
        reconnectTries: Number.MAX_VALUE,
        bufferMaxEntries: 0,
      },
    },
    bcrypt: {
      saltRounds: 10,
    },
    security: {
      csrf: {
        enable: false,
        ignoreJSON: true,
      },
      domainWhiteList: [
        'http://localhost:8080',
      ],
    },
    validate: {
      convert: true,
    },
    cors: {
      // origin: '*',
      allowMethods: 'GET,HEAD,PUT,POST,DELETE,PATCH,OPTIONS',
    },
    jwt: {
      secret: 'virapi-202008192239',
    },
    proxy: true, // é€šè¿‡ipsè·å–nginxä»£ç†å±‚çœŸå®IP
    session: {
      key: 'Vir_SESSION', // æ‰¿è½½ Session çš„ Cookie é”®å€¼å¯¹åå­—
      maxAge: 2 * 3600 * 1000, // Session çš„æœ€å¤§æœ‰æ•ˆæ—¶é—´
      httpOnly: true,
      encrypt: true,
      renew: true, // æ¯æ¬¡è®¿é—®é¡µé¢éƒ½ä¼šç»™sessionä¼šè¯å»¶é•¿æ—¶é—´
    },
    static: {
      prefix: '/',
      dir: path.join(appInfo.baseDir, 'app/public'),
      dynamic: true,
      preload: false,
      maxAge: 0,
      buffer: false,
    },
  };

  // use for cookie sign key, should change to your own and keep security
  config.keys = appInfo.name + '_hNW87vqPkMiMpLBHEtolB3Yg6vQsk5Ip4AJzCih2QCXbZBmjh5I033ELjdwB';

  // add your middleware config here
  config.middleware = [
    'errorHandler',
  ];

  config.siteFile = {
    '/favicon.ico': fs.readFileSync(appInfo.baseDir + '/app/public/favicon.ico'),
  };

  // add your user config here
  const userConfig = {
    // myAppName: 'egg',
    imgUri: '/images',
    imgDir: appInfo.baseDir + '/app/public/images',
  };

  return {
    ...config,
    ...userConfig,
  };
};
```

åœ¨ä½ çš„è‡ªå®šä¹‰é…ç½®å‚æ•°æ–‡ä»¶`config.local.js`ä¸­ï¼Œæˆ‘ä»¬å»ºè®®ä½ é…ç½®ä»¥ä¸‹å¿…è¦å‚æ•°ï¼š

``` javascript
'use strict';

// cookie & session æ•°æ®åŠ å¯†å®‰å…¨å­—ç¬¦ä¸²
exports.keys = 'xxxxxxxxx';   // å»ºè®®ä½ è‡ªå®šä¹‰é‡ç½®è¯¥å‚æ•°ï¼Œcookieã€sessionç­‰æ•°æ®åŠ å¯†æ—¶ä¼šç”¨åˆ°è¯¥å‚æ•°

// MongoDB ç›¸å…³å‚æ•°
exports.mongoose = {
  client: {
    url: 'mongodb://127.0.0.1:27017/local_virapi_db',   // ä½ çš„mongoæ•°æ®åº“è®¿é—®åœ°å€
    options: {
      // useMongoClient: true,
      autoReconnect: true,
      reconnectTries: Number.MAX_VALUE,
      bufferMaxEntries: 0,
    },
  },
};

// å›¾ç‰‡èµ„æºè®¿é—®åŸŸå
exports.imgUri = 'http://{ä½ çš„å›¾ç‰‡è®¿é—®åœ°å€}';    // è‹¥ä½ è¦å¯¹å›¾ç‰‡èµ„æºç‹¬ç«‹åˆ†é…åŸŸåå¯è®¾ç½®è¯¥å‚æ•°
```


### Mongoæ•°æ®åº“
ä¸ºäº†èƒ½ç™»å½•æ§åˆ¶å°ç³»ç»Ÿï¼Œéœ€è¦ä¸€ä¸ªåˆå§‹åŒ–çš„è´¦å·ä¿¡æ¯ã€‚åœ¨ä½ çš„mongoæ‰€åœ¨æœåŠ¡å™¨æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œåˆ›å»ºåˆå§‹è´¦å·ï¼š

```
// è¿›å…¥Mongoå‘½ä»¤å°
mongo 127.0.0.1:27017/local_virapi_db;  // è¯·æ›´æ¢ä½ çš„Mongoè®¿é—®åœ°å€

// åˆ‡æ¢åˆ°ç›®æ ‡æ•°æ®åº“
use local_virapi_db;  // è¯·æ›´æ¢ä½ çš„Mongoæ•°æ®å

// æ’å…¥åˆå§‹è´¦å·ä¿¡æ¯
db.getCollection('user').insertOne({
    "nickname" : "admin",
    "vir_uid" : "vir_admin",
    "vir_uid_updated" : null,
    "email" : "admin@virapi.com",
    "password" : "$2a$10$6fam2XUhNqU0nTNixjuoBuCx5aK2R8t.vEndOuVQ6vxVrinWXu9wy",
    "avatar" : "/default_avatar.jpg",
    "apps_count" : 0,
    "login_date" : ISODate("2020-08-21T12:35:47.312Z"),
    "status" : 1,
    "created" : ISODate("2020-08-19T15:20:43.192Z"),
    "updated" : ISODate("2020-08-21T12:35:47.315Z"),
    "__v" : 0
});
```

å…¶ä¸­ç™»å½•è´¦å·å³ä¸ºï¼š`admin@virapi.com`ï¼Œé»˜è®¤ç™»å½•å¯†ç ä¸ºï¼š`123456`ã€‚

ç™»å½•æˆåŠŸåï¼Œ**è¯·æ³¨æ„é‡ç½®ç™»å½•å¯†ç **ï¼Œä»¥ä¿éšœè´¦å·å®‰å…¨ã€‚

<br/>

## éƒ¨åˆ†åŠŸèƒ½é¡µé¢æˆªå›¾

![æ–°å»ºåº”ç”¨](https://images.gitee.com/uploads/images/2020/0827/020542_2a3ddd7c_863133.png)
<p align="center">æ–°å»ºåº”ç”¨ç¤ºä¾‹æˆªå›¾</p>

![æ–°å»ºæ¥å£](https://images.gitee.com/uploads/images/2020/0827/020624_3087b5c5_863133.png)
<p align="center">æ–°å»ºæ¥å£ç¤ºä¾‹æˆªå›¾</p>

![åº”ç”¨ç®¡ç†](https://images.gitee.com/uploads/images/2020/0827/013613_27aa4825_863133.png)
<p align="center">åº”ç”¨ç®¡ç†ç¤ºä¾‹æˆªå›¾</p>

![æ¥å£ç®¡ç†](https://images.gitee.com/uploads/images/2020/0827/013730_41332d18_863133.png)
<p align="center">æ¥å£ç®¡ç†ç¤ºä¾‹æˆªå›¾</p>

<br/>
<br/>

## è‹¥è§‰å¾—VirAPIæœ‰å¸®åˆ°ä½ ï¼Œè¯·èµåŠ©ä¸€ä¸‹ä»¥ç¤ºæ”¯æŒå“¦~
ğŸ˜è¯·å¤‡æ³¨`virapi`ã€‚

| <div style="text-align:center;color:#019fe8;">æ”¯ä»˜å®èµåŠ©</div> | <div style="text-align:center;color:#22ab39;">å¾®ä¿¡èµåŠ©</div> |
| --------- | --------- |
| <img src="https://images.gitee.com/uploads/images/2020/0821/230258_d7ecb18b_863133.png" alt="æ”¯ä»˜å®èµåŠ©" width="160px"> | <img src="https://images.gitee.com/uploads/images/2020/0821/230314_08ec5aad_863133.png" alt="å¾®ä¿¡èµåŠ©" width="160px"> |

<br/>
<br/>

æ¬¢è¿å¤§å®¶é€šè¿‡[Gitter](https://gitter.im/virapi/feedback)ä¸æˆ‘ä»¬æ²Ÿé€šå’Œè”ç³»ã€‚
